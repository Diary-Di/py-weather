<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="bg-light">
<div class="container mt-5">

    <!-- üå¶Ô∏è Title -->
    <h1 id="main-title" class="mb-4 text-center">üå¶Ô∏è M√©t√©o</h1>

    <!-- üîç Search Form -->
    <form method="POST" action="/search" class="d-flex justify-content-center align-items-center gap-2 mb-4" id="search-form">
        <input
            type="text"
            name="city"
            class="form-control rounded-pill"
            placeholder="Saisissez une ville"
            required
            style="width: 300px;"
        />
        <button type="submit" class="btn btn-primary rounded-pill px-4">Rechercher</button>
        <button type="button" onclick="getLocation()" class="btn btn-success rounded-pill px-4">Selon ma position</button>
    </form>

    <!-- ‚òÅÔ∏è Weather Display -->
    <div id="weatherResult">
        {% if weather %}
            {% if weather.error %}
                <div class="alert alert-danger text-center">{{ weather.error }}</div>
            {% else %}
                <div class="card p-4 text-center">
                    <h2 class="mb-4">{{ weather.city }}</h2>

                    <!-- üå°Ô∏è Current Conditions -->
                    <div class="row mb-4">
                        <div class="col">
                            <h5>üå°Ô∏è Temp√©rature</h5>
                            <p class="fw-bold mb-0" style="font-size: 1.5rem;">{{ weather.temperature_current }}¬∞</p>
                            <p class="text-muted">{{ weather.temperature }}</p>
                            <img src="http://openweathermap.org/img/wn/{{ weather.icon }}@2x.png" alt="icon">
                        </div>
                        <div class="col">
                            <h5>üíß Humidit√©</h5>
                            <p class="fw-bold">{{ weather.humidity }}%</p>
                        </div>
                        <div class="col">
                            <h5>üí® Vent</h5>
                            <p class="fw-bold">{{ weather.wind }} m/s</p>
                        </div>
                    </div>

                    <!-- üîÆ 3-Day Forecast -->
                    {% if weather.forecast %}
                        <h4 class="mb-3 text-center">Pr√©visions m√©t√©o durant 3 jours</h4>

                        <div class="row text-center fw-semibold text-secondary">

                            <!-- üå°Ô∏è Temperature forecast -->
                            <div class="col">
                                <div class="mb-1 d-flex justify-content-center gap-3">
                                    {% for day in weather.forecast %}
                                        <div style="min-width: 40px;">{{ day.weekday }}</div>
                                    {% endfor %}
                                </div>
                                <div class="d-flex justify-content-center gap-3">
                                    {% for day in weather.forecast %}
                                        <div style="min-width: 60px;">{{ day.temp }}</div>
                                    {% endfor %}
                                </div>
                                <div class="d-flex justify-content-center gap-3 mt-1">
                                    {% for day in weather.forecast %}
                                        <img src="http://openweathermap.org/img/wn/{{ day.icon }}@2x.png" alt="icon" width="50">
                                    {% endfor %}
                                </div>
                            </div>

                            <!-- üíß Humidity forecast -->
                            <div class="col">
                                <div class="mb-1 d-flex justify-content-center gap-3">
                                    {% for day in weather.forecast %}
                                        <div style="min-width: 40px;">{{ day.weekday }}</div>
                                    {% endfor %}
                                </div>
                                <div class="d-flex justify-content-center gap-3">
                                    {% for day in weather.forecast %}
                                        <div style="min-width: 40px;">{{ day.humidity }}%</div>
                                    {% endfor %}
                                </div>
                            </div>

                            <!-- üí® Wind forecast -->
                            <div class="col">
                                <div class="mb-1 d-flex justify-content-center gap-3">
                                    {% for day in weather.forecast %}
                                        <div style="min-width: 40px;">{{ day.weekday }}</div>
                                    {% endfor %}
                                </div>
                                <div class="d-flex justify-content-center gap-3">
                                    {% for day in weather.forecast %}
                                        <div style="min-width: 50px;">{{ day.wind }} m/s</div>
                                    {% endfor %}
                                </div>
                            </div>

                        </div>
                    {% endif %}
                </div>
            {% endif %}
        {% endif %}
    </div>
</div>

<script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
